<!DOCTYPE HTML>
<html>
<head>
    <meta charset="utf-8">
    <meta name="apple-mobile-web-app-status-bar-style" content="black">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta name="description" content="免费图片上传,七喜图床,图片链接生成,Free image hosting,get your pictures&apos; url">
    <title>七喜 - 免费图片上传空间</title>
    <meta name="generator" content="Chevereto 4">
	<script src="https://lib.baomitu.com/jquery/1.12.4/jquery.min.js"></script>
</head>
<body>
	<iframe src="https://7up.pics"></iframe>
	<form style="display: none;" id="myForm"  method="post" enctype="multipart/form-data" >
		<input  type="file" name="source" value="上传"/>
		<input  type="text" name="type" value="file"/>
		<input  type="text" name="action" value="upload"/>
		<input  type="text" name="timestamp" value=""/>
		<input  type="text" name="auth_token" value=""/>
		<input  type="text" name="expiration" value=""/>
		<input  type="text" name="nsfw" value="0"/> 
	</form> 
	<input  type="button" onclick="submit()" value="提交"/>
</body>
</html>
<script>
	var base="https://7up.pics";//"https://imgse.com";//
	document.getElementsByName("timestamp")[0].value=new Date().getTime();
	$.get(base,function(res){
		var tmp=res.split("PF.obj.config.auth_token")[1].substring(1,50);
		console.log(tmp);
		var at=tmp.substring(tmp.indexOf("\"")+1,tmp.indexOf("\";"));
		document.getElementsByName("auth_token")[0].value=at;
	})
	// action="https://7up.pics/json"
	function submit(){
		var form = $('#myForm')[0]; // 获取表单元素
		var data = new FormData(form); // 创建FormData对象来存储表单数据
		$.ajax({
		    url: base+"/json", // 指定URL地址
		    type: 'POST', // 或者'PUT'等其他HTTP动词
		    contentType: false, // 不设置Content-Type头部信息
		    processData: false, // 不处理数据
		    data: data, // 传递FormData对象作为数据
		    success: function (response) {
		        console.log('成功',response);
		    },
		    error: function (res) {
		        console.error('失败',res);
		    }
		});
	}
	
</script>

